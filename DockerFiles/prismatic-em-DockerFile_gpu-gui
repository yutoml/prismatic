FROM yutoml/prismatic_base:1.0

RUN apt-get update -y && \
	DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \
	pkg-config \
	git \
	qtbase5-dev &&\
	rm -rf /var/lib/apt/lists/* && \  
	git clone --branch dev https://github.com/yutoml/prismatic.git prismatic

RUN cd prismatic && \
	mkdir build && \
	cd build && \
	cmake ../ -DPRISMATIC_ENABLE_GPU=1 -DFFTW_INCLUDE_DIRS=/usr/local/fftw/include/ -DFFTW_ROOT=/usr/local/fftw/ -DPRISMATIC_ENABLE_CLI=1 -DPRISMATIC_ENABLE_GUI=1  &&\
	make -j 8 &&\
	make install